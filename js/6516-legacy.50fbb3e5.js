"use strict";(self.webpackChunkvue3_antd_admin=self.webpackChunkvue3_antd_admin||[]).push([[6516,7839,4334,3293,9941,4446,3261],{87717:function(e,n,t){t.a(e,(async function(e){var r=t(88478),a=t(48534),u=t(54621),i=t(95082),o=(t(35666),t(57327),t(41539),t(69600),t(92222),t(74916),t(23123),t(66252)),l=t(2262),c=t(94124),d=t(76478),s=t(80715),f=t(54446),h=t(90556),v=t(28747),p=t(68652),m=e([d,c,h,s]);[d,c,h,s]=m.then?await m:m;var g=(0,o.Uk)(" 新增 ");n.Z=(0,o.aZ)((0,i.Z)((0,i.Z)({},{name:"SysMenu"}),{},{setup:function(e){var n=(0,l.iH)([]),t=(0,l.iH)(),m=(0,s.U)(),y=(0,u.Z)(m,1)[0],w=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Af)();case 2:return t=e.sent,n.value=(0,v.bl)((0,p.Z)(t).filter((function(e){return 2!==e.type})),null),e.abrupt("return",{list:(0,v.bl)((0,p.Z)(t),null)});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(r){var o,l,d,s,f,v,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({modalProps:{title:"".concat(r.id?"编辑":"新增","菜单"),width:700,onFinish:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(n){var a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.menuId=r.id,n.perms=null===(a=n.perms)||void 0===a?void 0:a.join(","),e.next=5,(r.id?c._8:c.ZT)(n);case 5:null===(u=t.value)||void 0===u||u.refreshTable();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},formSchema:{labelWidth:100,layout:"vertical",schemas:h.menuSchemas}});case 2:f=e.sent,v=(0,u.Z)(f,1),p=v[0],null===(o=p.value)||void 0===o||o.updateSchema([{field:"parentId",componentProps:{treeDefaultExpandedKeys:[-1].concat((null==r?void 0:r.keyPath)||[]),treeData:[{key:-1,name:"一级菜单",children:n.value}]}}]),null===(l=p.value)||void 0===l||l.setFieldsValue((0,i.Z)((0,i.Z)({},r),{},{perms:null===(d=r.perms)||void 0===d?void 0:d.split(","),parentId:null!==(s=r.parentId)&&void 0!==s?s:-1}));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.RD)({menuId:n.id});case 2:null===(r=t.value)||void 0===r||r.refreshTable();case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=[].concat((0,r.Z)(f.baseColumns),[{title:"操作",width:160,dataIndex:"$action",hideInSearch:!0,align:"center",fixed:"right",actions:function(e){var n=e.record;return[{label:"编辑",auth:{perm:"sys.menu.update",effect:"disable"},onClick:function(){return b(n)}},{label:"删除",auth:"sys.menu.delete",popConfirm:{title:"你确定要删除吗？",onConfirm:function(){return x(n)}}}]}}]);return function(e,n){var r=(0,o.up)("a-button");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)((0,l.SU)(d.DynamicTable),{ref_key:"dynamicTableRef",ref:t,"row-key":"id","header-title":"菜单管理","data-request":w,columns:k,bordered:"",size:"small",search:!1,pagination:!1,scroll:{x:2e3}},{toolbar:(0,o.w5)((function(){return[(0,o.Wm)(r,{type:"primary",disabled:!e.$auth("sys.menu.add"),onClick:n[0]||(n[0]=function(e){return b({})})},{default:(0,o.w5)((function(){return[g]})),_:1},8,["disabled"])]})),_:1},512)])}}}))}))},94124:function(e,n,t){t.a(e,(async function(e){t.d(n,{Af:function(){return i},ZT:function(){return o},_8:function(){return l},RD:function(){return c}});var r=t(30803),a=t(88573),u=e([r]);function i(){return(0,r.W)({url:a.default.list,method:"get"})}function o(e){return(0,r.W)({url:a.default.add,method:"post",data:e},{successMsg:"创建成功"})}function l(e){return(0,r.W)({url:a.default.update,method:"post",data:e},{successMsg:"更新成功"})}function c(e){return(0,r.W)({url:a.default.delete,method:"post",data:e},{successMsg:"删除成功"})}r=(u.then?await u:u)[0]}))},28747:function(e,n,t){t.d(n,{fl:function(){return r},bl:function(){return a},BQ:function(){return u}});t(21249),t(57327),t(41539),t(92222),t(68309);var r=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.filter((function(e){return e.parentId===t})).map((function(a){var u=r.concat(t||[]),i=e(n,a.id,u);return Object.assign(a,{keyPath:u,title:a.name,key:a.id,value:a.id,formData:a,children:i.length?i:null})}))},a=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.filter((function(e){return e.parentId===t})).map((function(a){var u=r.concat(t||[]),i=e(n,a.id,u);return Object.assign(a,{keyPath:u,title:a.name,key:a.id,value:a.id,formData:a,children:i.length?i:null})}))},u=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children";return t.reduce((function(t,u){var i;return u[r]===n?u:t||(null!==(i=u[a])&&void 0!==i&&i.length?e(n,u[a],r,a):void 0)}),void 0)}},54446:function(e,n,t){t.r(n),t.d(n,{baseColumns:function(){return u}});var r=t(66252),a=function(e){switch(e){case 0:return"目录";case 1:return"菜单";case 2:return"权限";default:return""}},u=[{title:"名称",dataIndex:"name"},{title:"图标",width:80,dataIndex:"icon",align:"center",bodyCell:function(e){var n=e.record;return(0,r.Wm)(r.HY,null,[n.icon&&(0,r.Wm)((0,r.up)("icon-font"),{type:n.icon,size:"22"},null)])}},{title:"类型",width:80,align:"center",dataIndex:"type",bodyCell:function(e){var n=e.record;return(0,r.Wm)(r.HY,null,[a(n.type)])}},{title:"节点路由",dataIndex:"router",align:"center",width:240},{title:"路由缓存",dataIndex:"keepalive",align:"center",width:80},{title:"文件路径",width:280,align:"center",dataIndex:"viewPath"},{title:"权限",width:300,align:"center",dataIndex:"perms"},{title:"排序号",width:80,align:"center",dataIndex:"orderNum"},{title:"更新时间",width:180,align:"center",dataIndex:"updatedAt"}]},77652:function(e,n,t){t.a(e,(async function(e){t.r(n);var r=t(15592),a=e([r]);const u=(r=(a.then?await a:a)[0]).Z;n.default=u}))},15592:function(e,n,t){t.a(e,(async function(e){t.d(n,{Z:function(){return r.Z}});var r=t(87717),a=e([r]);r=(a.then?await a:a)[0]}))}}]);